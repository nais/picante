apiVersion: v1
kind: Secret
type: kubernetes.io/Opaque
metadata:
  name: {{ include "picante.fullname" . }}
  labels:
    {{- include "picante.labels" . | nindent 4 }}
stringData:
  picante.yaml: |
    features:
      {{- if .Values.config.features.enabled }}
      label-selectors:
        {{- .Values.config.features.labelSelectors | toYaml | nindent 8 }}
      {{- end }}
    cosign:
      {{- .Values.config.cosign | toYaml | nindent 6 }}
    storage:
    {{- .Values.config.storage | toYaml | nindent 6 }}
    identities:
    {{- .Values.config.identities | toYaml | nindent 6 }}
    github:
    {{- .Values.config.github | toYaml | nindent 6 }}
    teamIdentity:
    {{- .Values.config.teamIdentity | toYaml | nindent 6 }}
    cluster: {{ .Values.config.cluster }}
---
{{ if contains "fss" .Values.config.cluster }}
apiVersion: v1
kind: Secret
metadata:
  name: tuf-root-8-json
  namespace: {{ .Release.Namespace }}
data:
  8.root.json: |
    ewogICJzaWduZWQiOiB7CiAgICAiX3R5cGUiOiAicm9vdCIsCiAgICAic3BlY192ZXJzaW9uIjogIjEuMCIsCiAgICAidmVyc2lvbiI6IDgsCiAgICAiZXhwaXJlcyI6ICIyMDI0LTAzLTI2VDA0OjM4OjU1WiIsCiAgICAia2V5cyI6IHsKICAgICAgIjI1YTBlYjQ1MGZkM2VlMmJkNzkyMThjOTYzZGNlM2YxY2M2MTE4YmFkZjI1MWJmMTQ5ZjBiZDA3ZDVjYWJlOTkiOiB7CiAgICAgICAgImtleXR5cGUiOiAiZWNkc2Etc2hhMi1uaXN0cDI1NiIsCiAgICAgICAgInNjaGVtZSI6ICJlY2RzYS1zaGEyLW5pc3RwMjU2IiwKICAgICAgICAia2V5aWRfaGFzaF9hbGdvcml0aG1zIjogWwogICAgICAgICAgInNoYTI1NiIsCiAgICAgICAgICAic2hhNTEyIgogICAgICAgIF0sCiAgICAgICAgImtleXZhbCI6IHsKICAgICAgICAgICJwdWJsaWMiOiAiLS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS1cbk1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRUVYc3ozU1pYRmI4ak1WNDJqNnBKbHlqYmpSOEtcbk4zQndvY2V4cTZMTUliNXFzV0tPUXZMTjE2TlVlZkxjNEhzd09vdW1Sc1ZWYWFqU3BRUzZmb2JrUnc9PVxuLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tXG4iCiAgICAgICAgfQogICAgICB9LAogICAgICAiMmU2MWNkMGNiZjRhOGY0NTgwOWJkYTlmN2Y3OGMwZDMzYWQxMTg0MmZmOTRhZTM0MDg3M2UyNjY0ZGM4NDNkZSI6IHsKICAgICAgICAia2V5dHlwZSI6ICJlY2RzYS1zaGEyLW5pc3RwMjU2IiwKICAgICAgICAic2NoZW1lIjogImVjZHNhLXNoYTItbmlzdHAyNTYiLAogICAgICAgICJrZXlpZF9oYXNoX2FsZ29yaXRobXMiOiBbCiAgICAgICAgICAic2hhMjU2IiwKICAgICAgICAgICJzaGE1MTIiCiAgICAgICAgXSwKICAgICAgICAia2V5dmFsIjogewogICAgICAgICAgInB1YmxpYyI6ICItLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tLVxuTUZrd0V3WUhLb1pJemowQ0FRWUlLb1pJemowREFRY0RRZ0FFMGdocmg5Mkx3MVlyM2lkR1Y1V3FDdE1EQjhDeFxuK0Q4aGRDNHcyWkxOSXBsVlJvVkdMc2tZYTNnaGVNeU9qaUo4a1BpMTVhUTIvLzdQK29qN1V2SlBHdz09XG4tLS0tLUVORCBQVUJMSUMgS0VZLS0tLS1cbiIKICAgICAgICB9CiAgICAgIH0sCiAgICAgICI0NWIyODM4MjVlYjE4NGNhYmQ1ODJlYjE3Yjc0ZmM4ZWQ0MDRmNjhjZjQ1MmFjYWJkYWQyZWQ2ZjkwY2UyMTZiIjogewogICAgICAgICJrZXl0eXBlIjogImVjZHNhLXNoYTItbmlzdHAyNTYiLAogICAgICAgICJzY2hlbWUiOiAiZWNkc2Etc2hhMi1uaXN0cDI1NiIsCiAgICAgICAgImtleWlkX2hhc2hfYWxnb3JpdGhtcyI6IFsKICAgICAgICAgICJzaGEyNTYiLAogICAgICAgICAgInNoYTUxMiIKICAgICAgICBdLAogICAgICAgICJrZXl2YWwiOiB7CiAgICAgICAgICAicHVibGljIjogIi0tLS0tQkVHSU4gUFVCTElDIEtFWS0tLS0tXG5NRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkl6ajBEQVFjRFFnQUVMcld2TnQ5NHY0UjA4NUVMZWVDTXhIcDdQbGRGXG4wL1QxR3h1a1VoMk9EdWdnTEdKRTBwYzFlOENTQmY2Q1M5MUZ3bzlGVU91UnNqQlVsZCtWcVN5Q2RRPT1cbi0tLS0tRU5EIFBVQkxJQyBLRVktLS0tLVxuIgogICAgICAgIH0KICAgICAgfSwKICAgICAgIjdmNzUxM2IyNTQyOWE2NDQ3M2UxMGNlM2FkMmYzZGEzNzJiYmRkMTRiNjVkMDdiYmFmNTQ3ZTdjOGJiYmU2MmIiOiB7CiAgICAgICAgImtleXR5cGUiOiAiZWNkc2Etc2hhMi1uaXN0cDI1NiIsCiAgICAgICAgInNjaGVtZSI6ICJlY2RzYS1zaGEyLW5pc3RwMjU2IiwKICAgICAgICAia2V5aWRfaGFzaF9hbGdvcml0aG1zIjogWwogICAgICAgICAgInNoYTI1NiIsCiAgICAgICAgICAic2hhNTEyIgogICAgICAgIF0sCiAgICAgICAgImtleXZhbCI6IHsKICAgICAgICAgICJwdWJsaWMiOiAiLS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS1cbk1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRWluaWtTc0FRbVlrTmVINWVZcS9Dbkl6TGFhY09cbnhsU2Fhd1FET3dxS3kvdENxeHE1eHhQU0pjMjFLNFdJaHM5R3lPa0tmenVlWTNHSUx6Y01KWjRjV3c9PVxuLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tXG4iCiAgICAgICAgfQogICAgICB9LAogICAgICAiZTE4NjNiYTAyMDcwMzIyZWJjNjI2ZGNlY2Y5ZDg4MWEzYTM4YzM1YzNiNDFhODM3NjViNmFkNmMzN2VhZWMyYSI6IHsKICAgICAgICAia2V5dHlwZSI6ICJlY2RzYS1zaGEyLW5pc3RwMjU2IiwKICAgICAgICAic2NoZW1lIjogImVjZHNhLXNoYTItbmlzdHAyNTYiLAogICAgICAgICJrZXlpZF9oYXNoX2FsZ29yaXRobXMiOiBbCiAgICAgICAgICAic2hhMjU2IiwKICAgICAgICAgICJzaGE1MTIiCiAgICAgICAgXSwKICAgICAgICAia2V5dmFsIjogewogICAgICAgICAgInB1YmxpYyI6ICItLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tLVxuTUZrd0V3WUhLb1pJemowQ0FRWUlLb1pJemowREFRY0RRZ0FFV1JpR3I1K2orM0o1U3NIK1p0cjVuRTJIMndPN1xuQlYrbk8zczkzZ0xjYTE4cVRPekhZMW9XeUFHRHlrTVNzR1RVQlN0OUQrQW4wS2ZLc0QybWZTTTQyUT09XG4tLS0tLUVORCBQVUJMSUMgS0VZLS0tLS1cbiIKICAgICAgICB9CiAgICAgIH0sCiAgICAgICJmNTMxMmY1NDJjMjEyNzNkOTQ4NWE0OTM5NDM4NmM0NTc1ODA0NzcwNjY3ZjJkZGI1OWIzYmYwNjY5ZmRkZDJmIjogewogICAgICAgICJrZXl0eXBlIjogImVjZHNhLXNoYTItbmlzdHAyNTYiLAogICAgICAgICJzY2hlbWUiOiAiZWNkc2Etc2hhMi1uaXN0cDI1NiIsCiAgICAgICAgImtleWlkX2hhc2hfYWxnb3JpdGhtcyI6IFsKICAgICAgICAgICJzaGEyNTYiLAogICAgICAgICAgInNoYTUxMiIKICAgICAgICBdLAogICAgICAgICJrZXl2YWwiOiB7CiAgICAgICAgICAicHVibGljIjogIi0tLS0tQkVHSU4gUFVCTElDIEtFWS0tLS0tXG5NRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkl6ajBEQVFjRFFnQUV6QnpWT21IQ1Bvak1WTFNJMzY0V2lpVjhOUHJEXG42SWdSeFZsaXNrei92K3kzSkVSNW1jVkdjT05saURjV01DNUoybGZIbWpQTlBoYjRIN3htOEx6ZlNBPT1cbi0tLS0tRU5EIFBVQkxJQyBLRVktLS0tLVxuIgogICAgICAgIH0KICAgICAgfSwKICAgICAgImZmNTFlMTdmY2YyNTMxMTliNzAzM2Y2ZjU3NTEyNjMxZGE0YTA5Njk0NDJhZmNmOWZjOGIxNDFjN2YyYmU5OWMiOiB7CiAgICAgICAgImtleXR5cGUiOiAiZWNkc2Etc2hhMi1uaXN0cDI1NiIsCiAgICAgICAgInNjaGVtZSI6ICJlY2RzYS1zaGEyLW5pc3RwMjU2IiwKICAgICAgICAia2V5aWRfaGFzaF9hbGdvcml0aG1zIjogWwogICAgICAgICAgInNoYTI1NiIsCiAgICAgICAgICAic2hhNTEyIgogICAgICAgIF0sCiAgICAgICAgImtleXZhbCI6IHsKICAgICAgICAgICJwdWJsaWMiOiAiLS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS1cbk1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRXk4WEtzbWhCWURJOEpjMEd3ekJ4ZUtheDBjbTVcblNUS0VVNjVIUEZ1blVuNDFzVDhwaTBGak00SWtIei9ZVW13bUxVTzBXdDdseGhqNkJrTElLNHFZQXc9PVxuLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tXG4iCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgInJvbGVzIjogewogICAgICAicm9vdCI6IHsKICAgICAgICAia2V5aWRzIjogWwogICAgICAgICAgImZmNTFlMTdmY2YyNTMxMTliNzAzM2Y2ZjU3NTEyNjMxZGE0YTA5Njk0NDJhZmNmOWZjOGIxNDFjN2YyYmU5OWMiLAogICAgICAgICAgIjI1YTBlYjQ1MGZkM2VlMmJkNzkyMThjOTYzZGNlM2YxY2M2MTE4YmFkZjI1MWJmMTQ5ZjBiZDA3ZDVjYWJlOTkiLAogICAgICAgICAgImY1MzEyZjU0MmMyMTI3M2Q5NDg1YTQ5Mzk0Mzg2YzQ1NzU4MDQ3NzA2NjdmMmRkYjU5YjNiZjA2NjlmZGRkMmYiLAogICAgICAgICAgIjdmNzUxM2IyNTQyOWE2NDQ3M2UxMGNlM2FkMmYzZGEzNzJiYmRkMTRiNjVkMDdiYmFmNTQ3ZTdjOGJiYmU2MmIiLAogICAgICAgICAgIjJlNjFjZDBjYmY0YThmNDU4MDliZGE5ZjdmNzhjMGQzM2FkMTE4NDJmZjk0YWUzNDA4NzNlMjY2NGRjODQzZGUiCiAgICAgICAgXSwKICAgICAgICAidGhyZXNob2xkIjogMwogICAgICB9LAogICAgICAic25hcHNob3QiOiB7CiAgICAgICAgImtleWlkcyI6IFsKICAgICAgICAgICI0NWIyODM4MjVlYjE4NGNhYmQ1ODJlYjE3Yjc0ZmM4ZWQ0MDRmNjhjZjQ1MmFjYWJkYWQyZWQ2ZjkwY2UyMTZiIgogICAgICAgIF0sCiAgICAgICAgInRocmVzaG9sZCI6IDEKICAgICAgfSwKICAgICAgInRhcmdldHMiOiB7CiAgICAgICAgImtleWlkcyI6IFsKICAgICAgICAgICJmZjUxZTE3ZmNmMjUzMTE5YjcwMzNmNmY1NzUxMjYzMWRhNGEwOTY5NDQyYWZjZjlmYzhiMTQxYzdmMmJlOTljIiwKICAgICAgICAgICIyNWEwZWI0NTBmZDNlZTJiZDc5MjE4Yzk2M2RjZTNmMWNjNjExOGJhZGYyNTFiZjE0OWYwYmQwN2Q1Y2FiZTk5IiwKICAgICAgICAgICJmNTMxMmY1NDJjMjEyNzNkOTQ4NWE0OTM5NDM4NmM0NTc1ODA0NzcwNjY3ZjJkZGI1OWIzYmYwNjY5ZmRkZDJmIiwKICAgICAgICAgICI3Zjc1MTNiMjU0MjlhNjQ0NzNlMTBjZTNhZDJmM2RhMzcyYmJkZDE0YjY1ZDA3YmJhZjU0N2U3YzhiYmJlNjJiIiwKICAgICAgICAgICIyZTYxY2QwY2JmNGE4ZjQ1ODA5YmRhOWY3Zjc4YzBkMzNhZDExODQyZmY5NGFlMzQwODczZTI2NjRkYzg0M2RlIgogICAgICAgIF0sCiAgICAgICAgInRocmVzaG9sZCI6IDMKICAgICAgfSwKICAgICAgInRpbWVzdGFtcCI6IHsKICAgICAgICAia2V5aWRzIjogWwogICAgICAgICAgImUxODYzYmEwMjA3MDMyMmViYzYyNmRjZWNmOWQ4ODFhM2EzOGMzNWMzYjQxYTgzNzY1YjZhZDZjMzdlYWVjMmEiCiAgICAgICAgXSwKICAgICAgICAidGhyZXNob2xkIjogMQogICAgICB9CiAgICB9LAogICAgImNvbnNpc3RlbnRfc25hcHNob3QiOiB0cnVlCiAgfSwKICAic2lnbmF0dXJlcyI6IFsKICAgIHsKICAgICAgImtleWlkIjogImY1MzEyZjU0MmMyMTI3M2Q5NDg1YTQ5Mzk0Mzg2YzQ1NzU4MDQ3NzA2NjdmMmRkYjU5YjNiZjA2NjlmZGRkMmYiLAogICAgICAic2lnIjogIjMwNDQwMjIwMjRiODAzNmIzNzRmNzA3MTcyM2YzZjJjYjE5NzljNDJlNWRhMTkxMGYwYjE3ODgzNWFkNTQ2ZTNjMzYwODM2MzAyMjA3MTQwY2NkNDA4YWZjZjg3MjBkZDliZWE3ZjAwMzI1NzY4YzNhYTQ3YzIyZDUzMWM4NDljOTc0ZmQ1MGU0NWRkIgogICAgfSwKICAgIHsKICAgICAgImtleWlkIjogIjdmNzUxM2IyNTQyOWE2NDQ3M2UxMGNlM2FkMmYzZGEzNzJiYmRkMTRiNjVkMDdiYmFmNTQ3ZTdjOGJiYmU2MmIiLAogICAgICAic2lnIjogIjMwNDYwMjIxMDBkY2IxYTk2ZWNiZmMwNTc2OGEzYzczNzI2YTkyZDY4MWRhNzhlYWVjMDY4YTlhMGNmZTEzYTEyZGI2NzJlNDRiMDIyMTAwYTBkYWU3YmMyZTZiOTUzZTIxNWY1N2NjNjE0ZWI3MTY2MGI5NDYxZDZkYzg2MjY0YjBiNzRhNGYyZTEzMDdlMSIKICAgIH0sCiAgICB7CiAgICAgICJrZXlpZCI6ICIyZTYxY2QwY2JmNGE4ZjQ1ODA5YmRhOWY3Zjc4YzBkMzNhZDExODQyZmY5NGFlMzQwODczZTI2NjRkYzg0M2RlIiwKICAgICAgInNpZyI6ICIzMDQ2MDIyMTAwYzQ3MDhkOTQwNzdjYjNkNmRkNjBlYmQyZGQ2NjU0NWU3YWZiMDQ2NGNlMjU5M2E1ZjIzZjZlMzYwNGI5ZjIxZTAyMjEwMDk5MmU5NjljZDUwNjllYWIxNzQzOWIyYmE2MDc0M2ZlNDIyODc3YmMxYTFjNDZlOTM1YTZkNWNiNDdiM2NmYzYiCiAgICB9LAogICAgewogICAgICAia2V5aWQiOiAiMjVhMGViNDUwZmQzZWUyYmQ3OTIxOGM5NjNkY2UzZjFjYzYxMThiYWRmMjUxYmYxNDlmMGJkMDdkNWNhYmU5OSIsCiAgICAgICJzaWciOiAiMzA0NTAyMjA1MWZhYTZiNmZjMzczNzMwYjk3YzFhNGNkOTJkMDNlZmQ5OGI4M2Q0YzljOTNiZjRmNDA0ZDFmODhlYTJlYjE4MDIyMTAwZjcxYWMxY2Q3M2RjYmE5NTBmNDIxMGIxMmY5YTA1YjgxNDBiMDQ5MDI0N2M1MzM5MTkxZTg0MmI4NjgxNTViNCIKICAgIH0KICBdCn0=
    {{- end }}